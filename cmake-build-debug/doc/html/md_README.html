<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>SimpleAmqpClient: SimpleAmqpClient</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SimpleAmqpClient
   &#160;<span id="projectnumber">2.4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">SimpleAmqpClient </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://github.com/alanxz/SimpleAmqpClient">SimpleAmqpClient</a> is an easy-to-use C++ wrapper around the <a href="https://github.com/alanxz/rabbitmq-c">rabbitmq-c</a> C library. It derives inspiration from the <a href="http://majek.github.com/puka/puka.html">puka</a> AMQP library in that it abstracts away the underlying AMQP wire concept of channels and uses them as an error/consumer scope. This should make writing simple single-threaded AMQP-enabled apps easy.</p>
<h2>Installing </h2>
<p>Known to work in the following environments:</p><ul>
<li>Windows 7 (MSVC 10, Win64, Win32). Likely to work in others, but has not been tested</li>
<li>Linux (RHEL 6.0, GCC-4.4.5, 32 and 64 bit). Likely to work on other configurations, but has not been tested</li>
<li>Mac OS X (10.7, 10.6, gcc-4.2, 32 and 64-bit). Likely to work on older version, but has not been tested</li>
</ul>
<h3>Pre-requisites</h3>
<ul>
<li><a href="http://www.boost.org/">boost-1.47.0</a> or newer (uses chrono, system internally in addition to other header based libraries such as sharedptr and noncopyable)</li>
<li><a href="http://github.com/alanxz/rabbitmq-c">rabbitmq-c</a> you'll need version 0.5.1 or better.</li>
<li><a href="http://www.cmake.org/">cmake 2.8+</a> what is needed for the build system</li>
<li><a href="http://www.stack.nl/~dimitri/doxygen/">Doxygen</a> OPTIONAL only necessary to generate API documentation</li>
</ul>
<h3>Build procedure</h3>
<p>This is a typical cmake project, it should work like most typical cmake projects:</p>
<p>In a sibiling directory to where you extracted the source code: </p><pre class="fragment">mkdir simpleamqpclient-build
cd simpleamqpclient-build
cmake ..
</pre><p>Then use your the appropriate build utility to build the library (make, msbuild)</p>
<p>Interesting targets</p><ul>
<li>test - will build and run the tests</li>
<li>install - will install the library and headers to whatever CMAKE_INSTALL_PREFIX is defined to</li>
<li>doc - will generate API documentation if you have doxygen setup</li>
</ul>
<p>Notes:</p><ul>
<li>The test google-test based test suite can be enabled by passing <code>-DENABLE_TESTING=ON</code> to cmake</li>
</ul>
<h2>Using the library </h2>
<pre class="fragment">#include &lt;SimpleAmqpClient/SimpleAmqpClient.h&gt;
</pre><p>Will include all the headers necessary to use the library. The corresponding library is SimpleAmqpClient</p>
<p>The main interface to the library is the <a class="el" href="classAmqpClient_1_1Channel.html">AmqpClient::Channel</a> class. It represents a connection to an AMQP broker, the connection is established on contruction of an instance of this class. </p><pre class="fragment">AmqpClient::Channel::ptr_t connection = AmqpClient::Channel::Create("localhost");
</pre><p>All classes have a typedef ptr_t which is equivalent to boost::shared_ptr&lt;&gt; of the containing class. All classes also have a Create() method does the job creating a new ptr_t using boost::make_shared&lt;&gt;(). It is recommended that you use these methods to construct objects in the library.</p>
<p>Commands dealing with declaring/binding/unbinding/deleting exchanges and queues are all done with the above <a class="el" href="classAmqpClient_1_1Channel.html">AmqpClient::Channel</a> object. If one of these commands fails to complete a <a class="el" href="classAmqpClient_1_1ChannelException.html">AmqpClient::ChannelException</a> will be thrown, which can be caught and the <a class="el" href="classAmqpClient_1_1Channel.html">AmqpClient::Channel</a> object is still useable. If a more severe error occurs a <a class="el" href="classAmqpClient_1_1ConnectionException.html">AmqpClient::ConnectionException</a> or <a class="el" href="classAmqpClient_1_1AmqpResponseLibraryException.html">AmqpClient::AmqpResponseLibraryException</a> maybe thrown, in which case the Channel object is no longer in a usable state and further use will only generate more exceptions.</p>
<p>Consuming messages is done by setting up a consumer using the BasicConsume method. This method returns a consumer tag that should be used with the BasicConsumeMessage BasicQos, BasicRecover, and BasicCancel. </p><pre class="fragment">std::string consumer_tag = channel-&gt;BasicConsume("my_queue", "");
Envelope::ptr_t envelope = channel-&gt;BasicConsumeMessage(consumer_tag);
// Alternatively:
Envelope::ptr_t envelope;
channel-&gt;BasicConsumeMessage(consumer_tag, envelope, 10); // 10 ms timeout
// To ack:
channel-&gt;BasicAck(envelope);
// To cancel:
channel-&gt;BasicCancel(consumer_tag);</pre> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
